<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="包 Packages 一个 Cargo 特性支持构建，测试，和分享 Crates。包含了 Cargo.toml 来描述如何构建 Crates。包至少包含0或1个库Crate，可以包含任意多的二进制Crate，但至少要有一个Crate。
src/ main.rs 二进制Crate的根（名称为包名） lib.rs 库Crate的根（名称为包名） bin/ 更多二进制Crate（其中的每个文件为一个Crate） 构建配置 # https://doc.rust-lang.org/cargo/reference/profiles.html [profile.dev] opt-level = 0 [profile.release] opt-level = 3 共享相同依赖开发多个包：Cargo Workspaces。
文档注释 /// Adds one to the number given. /// /// # Examples /// /// ``` /// let arg = 5; /// let answer = my_crate::add_one(arg); /// /// assert_eq!(6, answer); /// ``` /// # Panics / Errors / Safety pubfn add_one(x: i32)-&amp;gt; i32 {x+1}使用 cargo doc --open 启动文档预览，使用 cargo test 进行文档测试。"><title>Rust 模块与项目</title>
<link rel=canonical href=https://stardustdl.github.io/posts/learning/rust-modules/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="Rust 模块与项目">
<meta property="og:description" content="包 Packages 一个 Cargo 特性支持构建，测试，和分享 Crates。包含了 Cargo.toml 来描述如何构建 Crates。包至少包含0或1个库Crate，可以包含任意多的二进制Crate，但至少要有一个Crate。
src/ main.rs 二进制Crate的根（名称为包名） lib.rs 库Crate的根（名称为包名） bin/ 更多二进制Crate（其中的每个文件为一个Crate） 构建配置 # https://doc.rust-lang.org/cargo/reference/profiles.html [profile.dev] opt-level = 0 [profile.release] opt-level = 3 共享相同依赖开发多个包：Cargo Workspaces。
文档注释 /// Adds one to the number given. /// /// # Examples /// /// ``` /// let arg = 5; /// let answer = my_crate::add_one(arg); /// /// assert_eq!(6, answer); /// ``` /// # Panics / Errors / Safety pubfn add_one(x: i32)-&amp;gt; i32 {x+1}使用 cargo doc --open 启动文档预览，使用 cargo test 进行文档测试。">
<meta property="og:url" content="https://stardustdl.github.io/posts/learning/rust-modules/">
<meta property="og:site_name" content="StardustDL's Blog">
<meta property="og:type" content="article"><meta property="article:section" content="Posts"><meta property="article:tag" content="Rust"><meta property="article:tag" content="编程语言"><meta property="article:published_time" content="2021-07-06T16:50:46+08:00"><meta property="article:modified_time" content="2021-07-06T16:50:46+08:00">
<meta name=twitter:title content="Rust 模块与项目">
<meta name=twitter:description content="包 Packages 一个 Cargo 特性支持构建，测试，和分享 Crates。包含了 Cargo.toml 来描述如何构建 Crates。包至少包含0或1个库Crate，可以包含任意多的二进制Crate，但至少要有一个Crate。
src/ main.rs 二进制Crate的根（名称为包名） lib.rs 库Crate的根（名称为包名） bin/ 更多二进制Crate（其中的每个文件为一个Crate） 构建配置 # https://doc.rust-lang.org/cargo/reference/profiles.html [profile.dev] opt-level = 0 [profile.release] opt-level = 3 共享相同依赖开发多个包：Cargo Workspaces。
文档注释 /// Adds one to the number given. /// /// # Examples /// /// ``` /// let arg = 5; /// let answer = my_crate::add_one(arg); /// /// assert_eq!(6, answer); /// ``` /// # Panics / Errors / Safety pubfn add_one(x: i32)-&amp;gt; i32 {x+1}使用 cargo doc --open 启动文档预览，使用 cargo test 进行文档测试。">
<link rel="shortcut icon" href=/favicon.png>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-111573521-1','auto'),ga('send','pageview'))</script>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/learning/>
Learning
</a>
</header>
<h2 class=article-title>
<a href=/posts/learning/rust-modules/>Rust 模块与项目</a>
</h2>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Jul 06, 2021</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
2 minute read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<h1 id=包-packages>包 Packages</h1>
<p>一个 Cargo 特性支持构建，测试，和分享 Crates。包含了 <code>Cargo.toml</code> 来描述如何构建 Crates。包至少包含0或1个库Crate，可以包含任意多的二进制Crate，但至少要有一个Crate。</p>
<pre tabindex=0><code>src/
    main.rs     二进制Crate的根（名称为包名）
    lib.rs      库Crate的根（名称为包名）
    bin/        更多二进制Crate（其中的每个文件为一个Crate）
</code></pre><h2 id=构建配置>构建配置</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=c># https://doc.rust-lang.org/cargo/reference/profiles.html</span>

<span class=p>[</span><span class=nx>profile</span><span class=p>.</span><span class=nx>dev</span><span class=p>]</span>
<span class=nx>opt-level</span> <span class=p>=</span> <span class=mi>0</span>

<span class=p>[</span><span class=nx>profile</span><span class=p>.</span><span class=nx>release</span><span class=p>]</span>
<span class=nx>opt-level</span> <span class=p>=</span> <span class=mi>3</span>
</code></pre></div><p>共享相同依赖开发多个包：<a class=link href=https://doc.rust-lang.org/book/ch14-03-cargo-workspaces.html target=_blank rel=noopener>Cargo Workspaces</a>。</p>
<h2 id=文档注释>文档注释</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=sd>/// Adds one to the number given.
</span><span class=sd>///
</span><span class=sd>/// # Examples
</span><span class=sd>///
</span><span class=sd>/// ```
</span><span class=sd>/// let arg = 5;
</span><span class=sd>/// let answer = my_crate::add_one(arg);
</span><span class=sd>///
</span><span class=sd>/// assert_eq!(6, answer);
</span><span class=sd>/// ```
</span><span class=sd>/// # Panics / Errors / Safety
</span><span class=sd></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_one</span><span class=p>(</span><span class=n>x</span>: <span class=kt>i32</span><span class=p>)</span><span class=w> </span>-&gt; <span class=kt>i32</span> <span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>x</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=mi>1</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>使用 <code>cargo doc --open</code> 启动文档预览，使用 <code>cargo test</code> 进行文档测试。</p>
<p>使用 <code>//!</code> 为当前文件添加注释。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=sd>//! # My Crate
</span><span class=sd>//!
</span><span class=sd>//! `my_crate` is a collection of utilities to make performing certain
</span><span class=sd>//! calculations more convenient.
</span><span class=sd></span><span class=w>
</span><span class=w></span><span class=sd>/// Adds one to the number given.
</span><span class=sd></span><span class=c1>// --snip--
</span></code></pre></div><h2 id=发布>发布</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>cargo login &lt;API Key&gt;
cargo publish
</code></pre></div><p><code>Cargo.toml</code>：</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>package</span><span class=p>]</span>
<span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;guessing_game&#34;</span>
<span class=nx>version</span> <span class=p>=</span> <span class=s2>&#34;0.1.0&#34;</span>
<span class=nx>authors</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;Your Name &lt;you@example.com&gt;&#34;</span><span class=p>]</span>
<span class=nx>edition</span> <span class=p>=</span> <span class=s2>&#34;2018&#34;</span>
<span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;A fun game where you guess what number the computer has chosen.&#34;</span>
<span class=nx>license</span> <span class=p>=</span> <span class=s2>&#34;MIT OR Apache-2.0&#34;</span>

<span class=p>[</span><span class=nx>dependencies</span><span class=p>]</span>
</code></pre></div><p>撤销一个版本：<code>cargo yank --vers 1.0.1</code>。</p>
<h1 id=crates>Crates</h1>
<p>树结构的一系列模块，用于生成类库或可执行文件（二进制）。</p>
<p>Crate 的根是一个由 Rust 编译器开始编译并作为根模块的源代码。</p>
<h1 id=模块-modules>模块 Modules</h1>
<p>控制代码组织，作用域和可访问性（可被外部访问或私有）。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>front_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>mod</span> <span class=nn>hosting</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span> <span class=nf>seat_at_table</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>mod</span> <span class=nn>serving</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span> <span class=nf>take_order</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span> <span class=nf>serve_order</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>
</span><span class=w>        </span><span class=k>fn</span> <span class=nf>take_payment</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><pre tabindex=0><code>crate
 └── front_of_house
     ├── hosting
     │   ├── add_to_waitlist
     │   └── seat_at_table
     └── serving
         ├── take_order
         ├── serve_order
         └── take_payment
</code></pre><h2 id=公开项目>公开项目</h2>
<p>使用 <code>pub</code> 标记公开。</p>
<p>公开函数和模块。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>front_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>hosting</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=c1>// Absolute path
</span><span class=c1></span><span class=w>    </span><span class=k>crate</span>::<span class=n>front_of_house</span>::<span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// Relative path
</span><span class=c1></span><span class=w>    </span><span class=n>front_of_house</span>::<span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>公开结构体及其字段。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>back_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>struct</span> <span class=nc>Breakfast</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=n>toast</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=n>seasonal_fruit</span>: <span class=nb>String</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=k>impl</span><span class=w> </span><span class=n>Breakfast</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>summer</span><span class=p>(</span><span class=n>toast</span>: <span class=kp>&amp;</span><span class=kt>str</span><span class=p>)</span><span class=w> </span>-&gt; <span class=nc>Breakfast</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>            </span><span class=n>Breakfast</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>                </span><span class=n>toast</span>: <span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=n>toast</span><span class=p>),</span><span class=w>
</span><span class=w>                </span><span class=n>seasonal_fruit</span>: <span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;peaches&#34;</span><span class=p>),</span><span class=w>
</span><span class=w>            </span><span class=p>}</span><span class=w>
</span><span class=w>        </span><span class=p>}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=c1>// Order a breakfast in the summer with Rye toast
</span><span class=c1></span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=k>mut</span><span class=w> </span><span class=n>meal</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>back_of_house</span>::<span class=n>Breakfast</span>::<span class=n>summer</span><span class=p>(</span><span class=s>&#34;Rye&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=c1>// Change our mind about what bread we&#39;d like
</span><span class=c1></span><span class=w>    </span><span class=n>meal</span><span class=p>.</span><span class=n>toast</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>String</span>::<span class=n>from</span><span class=p>(</span><span class=s>&#34;Wheat&#34;</span><span class=p>);</span><span class=w>
</span><span class=w>    </span><span class=fm>println!</span><span class=p>(</span><span class=s>&#34;I&#39;d like {} toast please&#34;</span><span class=p>,</span><span class=w> </span><span class=n>meal</span><span class=p>.</span><span class=n>toast</span><span class=p>);</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// The next line won&#39;t compile if we uncomment it; we&#39;re not allowed
</span><span class=c1></span><span class=w>    </span><span class=c1>// to see or modify the seasonal fruit that comes with the meal
</span><span class=c1></span><span class=w>    </span><span class=c1>// meal.seasonal_fruit = String::from(&#34;blueberries&#34;);
</span><span class=c1></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>公开枚举。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>back_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>enum</span> <span class=nc>Appetizer</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=n>Soup</span><span class=p>,</span><span class=w>
</span><span class=w>        </span><span class=n>Salad</span><span class=p>,</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>order1</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>back_of_house</span>::<span class=n>Appetizer</span>::<span class=n>Soup</span><span class=p>;</span><span class=w>
</span><span class=w>    </span><span class=kd>let</span><span class=w> </span><span class=n>order2</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>back_of_house</span>::<span class=n>Appetizer</span>::<span class=n>Salad</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><h2 id=导入项目>导入项目</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=p>{</span><span class=n>cmp</span>::<span class=n>Ordering</span><span class=p>,</span><span class=w> </span><span class=n>io</span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=p>{</span><span class=bp>self</span><span class=p>,</span><span class=w> </span><span class=n>Write</span><span class=p>};</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>collections</span>::<span class=o>*</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>mod</span> <span class=nn>front_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>hosting</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=n>front_of_house</span>::<span class=n>hosting</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>使用 <code>as</code> 关键字设置新名称。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>fmt</span>::<span class=nb>Result</span><span class=p>;</span><span class=w>
</span><span class=w></span><span class=k>use</span><span class=w> </span><span class=n>std</span>::<span class=n>io</span>::<span class=nb>Result</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>IoResult</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>function1</span><span class=p>()</span><span class=w> </span>-&gt; <span class=nb>Result</span> <span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=c1>// --snip--
</span><span class=c1></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>fn</span> <span class=nf>function2</span><span class=p>()</span><span class=w> </span>-&gt; <span class=nc>IoResult</span><span class=o>&lt;</span><span class=p>()</span><span class=o>&gt;</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=c1>// --snip--
</span><span class=c1></span><span class=p>}</span><span class=w>
</span></code></pre></div><p>使用 <code>pub use</code> 重新导出。</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>front_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>hosting</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=n>front_of_house</span>::<span class=n>hosting</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div><h2 id=分割模块到多个文件>分割模块到多个文件</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=c1>// lib.rs
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=k>mod</span> <span class=nn>front_of_house</span><span class=p>;</span><span class=w> </span><span class=c1>// Declaring the front_of_house module whose body will be in src/front_of_house.rs
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>use</span><span class=w> </span><span class=k>crate</span>::<span class=n>front_of_house</span>::<span class=n>hosting</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>    </span><span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// src/front_of_house.rs
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>hosting</span><span class=p>;</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=c1>// src/front_of_house/hosting.rs
</span><span class=c1></span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span></code></pre></div><h1 id=路径-paths>路径 Paths</h1>
<p>命名一个项目的方式。</p>
<ul>
<li>绝对路径：从Crate根的名字开始或使用 <code>crate</code> 指代根。</li>
<li>相对路径：从当前模块的名字开始或使用 <code>self, super</code> 指代。</li>
</ul>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-rust data-lang=rust><span class=k>mod</span> <span class=nn>front_of_house</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=k>mod</span> <span class=nn>hosting</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>        </span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>add_to_waitlist</span><span class=p>()</span><span class=w> </span><span class=p>{}</span><span class=w>
</span><span class=w>    </span><span class=p>}</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>pub</span><span class=w> </span><span class=k>fn</span> <span class=nf>eat_at_restaurant</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span><span class=w>    </span><span class=c1>// Absolute path
</span><span class=c1></span><span class=w>    </span><span class=k>crate</span>::<span class=n>front_of_house</span>::<span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w>
</span><span class=w>    </span><span class=c1>// Relative path
</span><span class=c1></span><span class=w>    </span><span class=n>front_of_house</span>::<span class=n>hosting</span>::<span class=n>add_to_waitlist</span><span class=p>();</span><span class=w>
</span><span class=w></span><span class=p>}</span><span class=w>
</span></code></pre></div>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/rust/>Rust</a>
<a href=/tags/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/>编程语言</a>
</section>
<section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span>
</section>
</footer>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/posts/learning/rust-functional/>
<div class=article-details>
<h2 class=article-title>Rust 函数式编程</h2>
</div>
</a>
</article>
<article>
<a href=/posts/learning/rust-generic-types/>
<div class=article-details>
<h2 class=article-title>Rust 泛型</h2>
</div>
</a>
</article>
<article>
<a href=/posts/learning/rust-collections/>
<div class=article-details>
<h2 class=article-title>Rust 集合</h2>
</div>
</a>
</article>
<article>
<a href=/posts/learning/rust-onwership/>
<div class=article-details>
<h2 class=article-title>Rust 所有权特性</h2>
</div>
</a>
</article>
<article>
<a href=/posts/learning/rust-startup/>
<div class=article-details>
<h2 class=article-title>Rust 语言基础使用</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<script src=https://utteranc.es/client.js repo=StardustDL/stardustdl.github.io issue-term=pathname label=comment crossorigin=anonymous async></script>
<style>.utterances{max-width:unset}</style>
<script>function setUtterancesTheme(b){let a=document.querySelector('.utterances iframe');a&&a.contentWindow.postMessage({type:'set-theme',theme:`github-${b}`},'https://utteranc.es')}addEventListener('message',a=>{if(a.origin!=='https://utteranc.es')return;setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener('onColorSchemeChange',a=>{setUtterancesTheme(a.detail)})</script>
<footer class=site-footer>
<section class=copyright>
&copy;
2017 -
2021 StardustDL's Blog
</section>
<section class=powerby>
<a style=color:gray href=http://www.beian.miit.gov.cn>冀ICP备19021004号</a> <br>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.5.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li><a href=#包-packages>包 Packages</a>
<ol>
<li><a href=#构建配置>构建配置</a></li>
<li><a href=#文档注释>文档注释</a></li>
<li><a href=#发布>发布</a></li>
</ol>
</li>
<li><a href=#crates>Crates</a></li>
<li><a href=#模块-modules>模块 Modules</a>
<ol>
<li><a href=#公开项目>公开项目</a></li>
<li><a href=#导入项目>导入项目</a></li>
<li><a href=#分割模块到多个文件>分割模块到多个文件</a></li>
</ol>
</li>
<li><a href=#路径-paths>路径 Paths</a></li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>