{"Id":"Tools/progLang-dockerfile","Type":2,"AuthorId":"","Content":{"Tag":"","Raw":"\n# \u57FA\u672C\u4FE1\u606F\n\n- Dockerfile \u4E3A Docker \u63D0\u4F9B\u955C\u50CF\u6784\u5EFA\u547D\u4EE4\u53CA\u63CF\u8FF0\u3002\n- Docker \u4E66\u5199\u601D\u60F3\uFF1A\n  - \u81EA\u52A8\u5316\uFF0C\u65E0\u4EA4\u4E92\n  - \u987A\u5E8F\u76F8\u5173\n  - \u6E05\u7406\n  - \u6613\u8BFB\n\n# \u57FA\u7840\u8BED\u6CD5\n\n- \u0060//\u0060 \u6CE8\u91CA\n- \u0060INSTRUCTION arguments\u0060 \u6307\u4EE4\u683C\u5F0F\uFF0C\u4E00\u822C\u6307\u4EE4\u540D\u5927\u5199\n\n# \u6307\u4EE4\n\n## FROM\n\n\u6307\u5B9A\u57FA\u7840\u955C\u50CF\uFF0C\u5FC5\u987B\u662F\u7B2C\u4E00\u53E5\u6709\u6548\u6307\u4EE4\u3002\n\n\u0060\u0060\u0060Dockerfile\nFROM \u003CimagesName:tag\u003E\n\u0060\u0060\u0060\n\n\u591A\u4E2A \u0060FROM\u0060 \u6307\u4EE4\u4F7F\u7528\u6700\u540E\u4E00\u4E2A\u3002\n\n## MAINTAINER\n\n\u8BBE\u7F6E\u7EF4\u62A4\u8005\u4FE1\u606F\u3002\n\n\u0060\u0060\u0060Dockerfile\nMAINTAINER Name \u003CEmail\u003E\n\u0060\u0060\u0060\n\n### RUN\n\n\u8FD0\u884C\u6307\u5B9A\u547D\u4EE4\u3002\n\n- shell \u683C\u5F0F\n\n\u0060\u0060\u0060Dockerfile\nRUN echo HelloWorld\n\u0060\u0060\u0060\n\n- exec \u683C\u5F0F\uFF08\u4E0D\u542F\u52A8 shell\uFF09\n\n\u0060\u0060\u0060Dockerfile\nRUN [\u0022prog\u0022, \u0022arg1\u0022, \u0022arg2\u0022]\n\u0060\u0060\u0060\n\n### ENV\n\n\u8BBE\u7F6E\u955C\u50CF\u7684\u73AF\u5883\u53D8\u91CF\u3002\n\n\u0060\u0060\u0060Dockerfile\nENV \u003Ckey\u003E \u003Cvalue\u003E\n\u0060\u0060\u0060\n\n### COPY\n\n\u5C06\u672C\u5730\u6587\u4EF6\u6216\u6587\u4EF6\u5939\u590D\u5236\u5230\u955C\u50CF\u6307\u5B9A\u8DEF\u5F84\u4E0B\u3002\n\n\u0060\u0060\u0060Dockerfile\nCOPY /local/path/file /images/path/file\n\u0060\u0060\u0060\n\n### ADD\n\n\u53EF\u4ECE\u672C\u5730\u6216\u7F51\u4E0A\u83B7\u53D6\uFF0C\u5B58\u50A8\u5230\u955C\u50CF\u6307\u5B9A\u8DEF\u5F84\u4E0B\uFF0C\u4E5F\u53EF\u5BF9\u6587\u4EF6\u81EA\u52A8\u89E3\u5305\u3002\n\n\u0060\u0060\u0060Dockerfile\nADD file /images/path/file\nADD latest.tar.gz /var/www/\n\u0060\u0060\u0060\n\n- \u76F8\u540C\u590D\u5236\u547D\u4EE4\u4E0B\uFF0CADD \u6784\u5EFA\u7684\u955C\u50CF\u6BD4 COPY \u6784\u5EFA\u7684\u955C\u50CF\u5927\n- \u4E0D\u80FD\u5BF9\u6784\u5EFA\u76EE\u5F55\u6216\u4E0A\u4E0B\u6587\u4E4B\u5916\u7684\u6587\u4EF6\u8FDB\u884C ADD \u64CD\u4F5C\uFF1A\u4E0D\u80FD\u4F7F\u7528 \u0060../path\u0060\n- \u4F1A\u81EA\u52A8\u521B\u5EFA\u76EE\u7684\u4F4D\u7F6E\n- \u4F1A\u4F7F\u5F97\u6784\u5EFA\u7F13\u5B58\u65E0\u6548\n\n### EXPOSE\n\n\u6307\u5B9A\u66B4\u9732\u7AEF\u53E3\u3002\n\n\u0060\u0060\u0060Dockerfile\nEXPOSE \u003Cport\u003E [\u003Cport\u003E...]\n\u0060\u0060\u0060\n\n### CMD\n\n\u8BBE\u7F6E\u955C\u50CF\u542F\u52A8\u547D\u4EE4\u3002\u53EA\u6709\u6700\u540E\u4E00\u4E2A CMD \u6307\u4EE4\u6709\u6548\u3002\n\n\u0060\u0060\u0060Dockerfile\nCMD [\u0022echo\u0022, \u0022Hello World\u0022]\n\u0060\u0060\u0060\n\n### ENTRYPOINT\n\n\u8BBE\u7F6E\u5165\u53E3\u70B9\u3002\n\n\u0060\u0060\u0060Dockerfile\nENTRYPOINT [\u0022echo\u0022]\n\u0060\u0060\u0060\n\n### VOLUME\n\n\u8BBE\u7F6E\u6570\u636E\u5377\u3002\n\n\u0060\u0060\u0060Dockerfile\nVOLUME [\u0022/data\u0022, \u0022/data2\u0022]\n\u0060\u0060\u0060\n\n### USER\n\n\u8BBE\u7F6E\u6784\u5EFA\u7528\u6237\u3002\u6307\u5B9A\u7684\u7528\u6237\u9700\u8981\u5728 USER \u6307\u4EE4\u524D\u521B\u5EFA\u3002\n\n\u0060\u0060\u0060Dockerfile\nUSER user\nUSER user:group\nUSER uid:gid\n\u0060\u0060\u0060\n\n### WORKDIR\n\n\u8BBE\u7F6E RUN,CMD,ENTRYPOINT \u5DE5\u4F5C\u76EE\u5F55\u3002\n\n\u0060\u0060\u0060Dockerfile\nWORKDIR /path/workdir\n\u0060\u0060\u0060\n\n### ONBUILD\n\n\u7528\u4E8E\u5B50\u955C\u50CF\u7684\u4E8C\u6B21\u6784\u5EFA\u4E2D\u6267\u884C\u7684 Dockerfile \u6307\u4EE4\u3002\n\n\u0060\u0060\u0060Dockerfile\nONBUILD RUN echo \u0022Hello World\u0022\n\u0060\u0060\u0060\n\n### LABEL\n\n\u6DFB\u52A0\u5143\u6570\u636E\u5230\u955C\u50CF\u3002\u5C3D\u91CF\u4F7F\u7528\u4E00\u4E2A LABEL \u6807\u7B7E\uFF0C\u51CF\u5C11\u6784\u5EFA layer \u6570\u91CF\u3002\n\n\u0060\u0060\u0060Dockerfile\nLABEL multi.label1=\u0022value1\u0022 multi.label2=\u0022value2\u0022\n\u0060\u0060\u0060\n\n### ARG\n\n\u8BBE\u7F6E\u6784\u5EFA\u53D8\u91CF\u3002\n\n\u0060\u0060\u0060Dockerfile\nARG \u003Ckey\u003E \u003Cvalue\u003E\n\u0060\u0060\u0060\n\n### STOPSIGNAL\n\n\u6307\u5B9A\u8FD0\u884C \u0060docker stop\u0060 \u65F6\uFF0C\u5411\u5BB9\u5668\u53D1\u9001\u7684\u4FE1\u53F7\u3002\n\n\u0060\u0060\u0060Dockerfile\nSTOPSIGNAL SIGKILL\n\u0060\u0060\u0060\n\n### HEALTHCHECK\n\n\u68C0\u67E5\u5BB9\u5668\u72B6\u6001\u3002\n\n\u53C2\u6570\u6709\uFF1A\n- \u0060--interval\u0060 \u5BB9\u5668\u542F\u52A8\u591A\u957F\u65F6\u95F4\u540E\u5F00\u59CB\u68C0\u67E5\n- \u0060--timeout\u0060 \u8BBE\u7F6E\u8D85\u65F6\u65F6\u95F4\uFF0C\u82E5\u8D85\u65F6\uFF0C\u5219\u8BA4\u4E3A\u5BB9\u5668\u5F02\u5E38\n- \u0060--retried\u0060 \u8BBE\u7F6E\u91CD\u8BD5\u6B21\u6570\n\n\u0060\u0060\u0060Dockerfile\nHEALTHCHECK [OPTIONS] CMD command\n\u0060\u0060\u0060\n\n### SHELL\n\n\u6307\u793A\u66F4\u6362 shell \u73AF\u5883\u3002\n\n\u0060\u0060\u0060Dockerfile\nSHELL [\u0022powershell\u0022, \u0022-command\u0022]\n\u0060\u0060\u0060\n\n# \u53C2\u8003\u8D44\u6599\n\n- \u300ADocker \u4ECE\u5165\u95E8\u5230\u5B9E\u6218\u300B \u9EC4\u9756\u94A7 \u673A\u68B0\u5DE5\u4E1A\u51FA\u7248\u793E\n"},"Title":"Dockerfile","Category":{"Items":["Tools"]},"Keywords":{"Items":["\u7F16\u7A0B\u8BED\u8A00"]},"CreationTime":"2018-11-12T19:37:36+08:00","ModificationTime":"2018-11-12T19:37:36+08:00"}