{"Id":"Learning/nju-icspa-analytics-navy-apps","Type":0,"AuthorId":"","Content":{"Tag":"","Raw":"\n# \u6982\u8FF0\n\n- [\u6846\u67B6\u4EE3\u7801\u5E93](https://github.com/NJU-ProjectN/navy-apps)\n- CPU \u67B6\u6784\uFF1Ax64\n- \u64CD\u4F5C\u7CFB\u7EDF: GNU/Linux\n- \u7F16\u8BD1\u5668: GCC\n- \u7F16\u7A0B\u8BED\u8A00\uFF1AC \u8BED\u8A00\n\nNavy-Apps \u63D0\u4F9B\u4E00\u7CFB\u5217\u8FD0\u884C\u5728 Nanos-lite \u4E0A\u7684\u7528\u6237\u7A0B\u5E8F\uFF0C\u4E5F\u5305\u542B\u4E86 Newlib \u5E93\u3002\n\n## \u6846\u67B6\u4EE3\u7801\u7ED3\u6784\n\n\u0060\u0060\u0060\nnanos-lite/\nnavy-apps/\n    apps/               # \u7528\u6237\u7A0B\u5E8F\n        am-apps/\n            Makefile\n        init/\n        litenes/\n        lua/\n        nterm/\n        nwm/\n        pal/            # \u4ED9\u5251\u5947\u4FA0\u4F20\n        slider/\n    fsimg/              # \u6839\u6587\u4EF6\u7CFB\u7EDF\n    libs/               # \u5E93\n        libc/           # Newlib C\u5E93\n        libos/          # \u7CFB\u7EDF\u8C03\u7528\u7684\u7528\u6237\u5C42\u5C01\u88C5\n            syscall.h   # \u7CFB\u7EDF\u8C03\u7528\u7C7B\u578B\n    tests/              # \u4E00\u4E9B\u6D4B\u8BD5\nnemu/\nnexus-am/\n\u0060\u0060\u0060\n\n- \u0060libs/libos/syscall.h\u0060 \u4E0E \u0060nanos-lite/syscall.h\u0060 \u76F8\u540C\u3002\n\n## \u76F8\u5173\u8D44\u6599\n\n- [NEMU](/posts/Learning%2nju-icspa-analytics-nemu)\n- [Nexus-am](/posts/Learning%2nju-icspa-analytics-nexus-am)\n- [Nanos-lite](/posts/Learning%2nju-icspa-analytics-nanos-lite)\n- [Navy-apps](/posts/Learning%2nju-icspa-analytics-navy-apps)\n\n# libs/\n\n## libc/\n\nNewlib \u9879\u76EE, \u5B83\u662F\u4E00\u4E2A\u4E13\u95E8\u4E3A\u5D4C\u5165\u5F0F\u7CFB\u7EDF\u63D0\u4F9B\u7684 C \u5E93, \u5E93\u4E2D\u7684\u51FD\u6570\u5BF9\u8FD0\u884C\u65F6\u73AF\u5883\u7684\u8981\u6C42\u6781\u4F4E. \u8FD9\u5BF9Nanos-lite\u6765\u8BF4\u662F\u975E\u5E38\u53CB\u597D\u7684, \u6211\u4EEC\u4E0D\u9700\u8981\u4E3A\u4E86\u914D\u5408C\u5E93\u800C\u5728Nanos-lite\u4E2D\u5B9E\u73B0\u989D\u5916\u7684\u529F\u80FD. \u7528\u6237\u7A0B\u5E8F\u7684\u5165\u53E3\u4F4D\u4E8E \u0060navy-apps/libs/libc/start.c\u0060 \u4E2D\u7684 \u0060_start()\u0060 \u51FD\u6570, \u5B83\u4F1A\u8C03\u7528\u7528\u6237\u7A0B\u5E8F\u7684 \u0060main()\u0060 \u51FD\u6570, \u4ECE \u0060main()\u0060 \u51FD\u6570\u8FD4\u56DE\u540E\u4F1A\u8C03\u7528 \u0060exit()\u0060 \u7ED3\u675F\u8FD0\u884C.\n\n## libos/src/nanos.c\n\n\u7CFB\u7EDF\u8C03\u7528\u7684\u7528\u6237\u5C42\u5C01\u88C5\u3002\n\n### \u51FD\u6570 _syscall_\n\n\u8FDB\u884C\u7CFB\u7EDF\u8C03\u7528\u7684\u63A5\u53E3\u3002\n\n\u0060\u0060\u0060c\nintptr_t _syscall_(int type, intptr_t a0, intptr_t a1, intptr_t a2) {\n  int ret;\n  asm volatile(\u0022int $0x80\u0022: \u0022=a\u0022(ret): \u0022a\u0022(type), \u0022b\u0022(a0), \u0022c\u0022(a1), \u0022d\u0022(a2));\n  return ret;\n}\n\u0060\u0060\u0060\n\n### \u4E00\u7CFB\u5217\u7CFB\u7EDF\u8C03\u7528\u51FD\u6570\n\n|\u51FD\u6570|\u63CF\u8FF0|\n|-|-|\n|\u0060_exit\u0060|\u9000\u51FA|\n|\u0060_open\u0060|\u6253\u5F00\u6587\u4EF6|\n|\u0060_write\u0060|\u5199\u5165\u6587\u4EF6|\n|\u0060_sbrk\u0060|\u589E\u957F\u5806\u533A\u5927\u5C0F|\n|\u0060_read\u0060|\u8BFB\u53D6\u6587\u4EF6|\n|\u0060_close\u0060|\u5173\u95ED\u6587\u4EF6|\n|\u0060_lseek\u0060|\u6539\u53D8\u6587\u4EF6\u6D41\u4F4D\u7F6E|\n|\u0060_execve\u0060||\n|(TODO)||\n\n# \u5F15\u7528\u8D44\u6599\n\n- [ICS2018 PA \u8BB2\u4E49](https://legacy.gitbook.com/book/nju-ics/ics2018-programming-assignment/details)"},"Title":"NJU ICS Programming Assignment \u4EE3\u7801\u5206\u6790 - NAVY-APPS","Category":{"Items":["Learning"]},"Keywords":{"Items":[]},"CreationTime":"2018-11-05T17:30:22+08:00","ModificationTime":"2018-11-05T17:30:22+08:00"}