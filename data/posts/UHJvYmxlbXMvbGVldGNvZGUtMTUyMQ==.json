{"Id":"Problems/leetcode-1521","Type":0,"AuthorId":"","Content":{"Tag":"","Raw":"\n\u533A\u95F4\u53D6 \u0060AND\u0060 \u548C\uFF0C\u56FA\u5B9A\u5DE6\u7AEF\u70B9\uFF0C\u7ED3\u679C\u662F\u9012\u51CF\u7684\uFF0C\u4ECE\u800C\u76EE\u6807\u51FD\u6570 \u0060|ANDSUM(l, r) - target|\u0060 \u662F\u4E00\u4E2A\u5355\u5CF0\u51FD\u6570\u3002\n\n\u5C06\u6BCF\u4E2A\u6570\u62C6\u6210\u4E8C\u8FDB\u5236\u6570\u4F4D\uFF0C\u7EF4\u62A4\u6BCF\u4E00\u4F4D\u7684\u524D\u7F00\u548C\uFF0C\u53EA\u8981\u7B2C \u0060i\u0060 \u4F4D\u7684\u533A\u95F4\u548C \u0060bit[r]-bit[l] \u003C r-l\u0060 \u5373\u53EF\u77E5\u6B64\u533A\u95F4\u8FD9\u4E00\u4F4D\u4E0A\u5B58\u5728 0\uFF0C\u8FDB\u800C \u0060AND\u0060 \u548C\u7684\u8FD9\u4E00\u4F4D\u4E3A 0\uFF0C\u5426\u5219\u4E3A 1\u3002\n\n\u9884\u5904\u7406\u4E0A\u8FF0\u7ED3\u679C\u540E\uFF0C\u53EF\u4EE5\u5728 $O(32)$ \u5185\u5F97\u5230\u533A\u95F4 \u0060AND\u0060 \u548C\u3002\n\n\u7ED3\u5408\u4E4B\u524D\u7684\u5355\u5CF0\u51FD\u6570\u6027\u8D28\uFF0C\u679A\u4E3E\u5DE6\u7AEF\u70B9\uFF0C\u4F7F\u7528\u4E09\u5206\u6CD5\u8BA1\u7B97\u56FA\u5B9A\u5DE6\u7AEF\u70B9\u4E0B\u7684\u6700\u4F18\u503C\u5373\u53EF\u3002\n\n\u6B64\u5B9E\u73B0\u9047\u5230\u4E86\u5E38\u6570\u95EE\u9898\uFF0C\u7ECF\u8FC7\u5E38\u6570\u4F18\u5316\u540E\u901A\u8FC7\u3002\n\n\u0060\u0060\u0060cpp\nclass Solution\n{\n    vector\u003Cint\u003E bit[30];\n    inline int getValue(int l, int r)\n    {\n        int res = 0;\n        for (int i = 0; i \u003C 30; i\u002B\u002B)\n        {\n            if (bit[i][r \u002B 1] - bit[i][l] == r - l \u002B 1)\n            {\n                res |= (1 \u003C\u003C i);\n            }\n        }\n        return res;\n    }\n    inline int calc(int l, int r, int target)\n    {\n        return abs(getValue(l, r) - target);\n    }\n\npublic:\n    int closestToTarget(vector\u003Cint\u003E \u0026arr, int target)\n    {\n        int n = arr.size();\n        for (int j = 0; j \u003C 30; j\u002B\u002B)\n        {\n            bit[j].clear();\n            bit[j].push_back(0);\n        }\n        for (int i = 0; i \u003C n; i\u002B\u002B)\n        {\n            for (int j = 0; j \u003C 30; j\u002B\u002B)\n            {\n                bit[j].push_back(bit[j][i] \u002B (arr[i] \u003E\u003E j \u0026 1));\n            }\n        }\n        int ans = 1 \u003C\u003C 30;\n        for (int l = 0; l \u003C n; l\u002B\u002B)\n        {\n            int s = l, t = n - 1, tans = 1 \u003C\u003C 30;\n            while (s \u002B 2 \u003C= t)\n            {\n                int len = t - s \u002B 1;\n                int ml = s \u002B (len / 3);\n                int mr = t - (len / 3);\n                int vl = calc(l, ml, target), vr = calc(l, mr, target);\n                tans = min(tans, min(vl, vr));\n                if (vl \u003C= vr)\n                {\n                    t = mr;\n                }\n                else\n                {\n                    s = ml;\n                }\n            }\n            for (int i = s; i \u003C= t; i\u002B\u002B)\n                tans = min(tans, calc(l, i, target));\n            ans = min(ans, tans);\n        }\n        return ans;\n    }\n};\n\u0060\u0060\u0060"},"Title":"LeetCode-1521 \u627E\u5230\u6700\u63A5\u8FD1\u76EE\u6807\u503C\u7684\u51FD\u6570\u503C","Category":{"Items":["Problems"]},"Keywords":{"Items":["leetcode"]},"CreationTime":"2020-07-19T12:30:28+08:00","ModificationTime":"2020-07-19T12:30:28+08:00"}