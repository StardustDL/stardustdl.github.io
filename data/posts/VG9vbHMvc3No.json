{"Id":"Tools/ssh","Type":2,"AuthorId":"","Content":{"Tag":"","Raw":"\n# \u57FA\u672C\u4FE1\u606F\n\n- \u4ECB\u7ECD\uFF1A\u8F83\u5B89\u5168\u5B9E\u73B0\u8FDC\u7A0B\u8FDE\u63A5\uFF0C\u63A7\u5236\uFF0C\u4F20\u8F93\u7684\u4E00\u79CD\u5DE5\u5177\u3002\n\n# \u57FA\u7840\u77E5\u8BC6\n\nSSH\u4E4B\u6240\u4EE5\u80FD\u591F\u4FDD\u8BC1\u5B89\u5168\uFF0C\u539F\u56E0\u5728\u4E8E\u5B83\u91C7\u7528\u4E86\u516C\u94A5\u52A0\u5BC6\u3002\u6574\u4E2A\u8FC7\u7A0B\u662F\u8FD9\u6837\u7684\uFF1A\n1. \u8FDC\u7A0B\u4E3B\u673A\u6536\u5230\u7528\u6237\u7684\u767B\u5F55\u8BF7\u6C42\uFF0C\u628A\u81EA\u5DF1\u7684\u516C\u94A5\u53D1\u7ED9\u7528\u6237\u3002\n2. \u7528\u6237\u4F7F\u7528\u8FD9\u4E2A\u516C\u94A5\uFF0C\u5C06\u767B\u5F55\u5BC6\u7801\u52A0\u5BC6\u540E\uFF0C\u53D1\u9001\u56DE\u6765\u3002\n3. \u8FDC\u7A0B\u4E3B\u673A\u7528\u81EA\u5DF1\u7684\u79C1\u94A5\uFF0C\u89E3\u5BC6\u767B\u5F55\u5BC6\u7801\uFF0C\u5982\u679C\u5BC6\u7801\u6B63\u786E\uFF0C\u5C31\u540C\u610F\u7528\u6237\u767B\u5F55\u3002\n\n\u8FD9\u4E2A\u8FC7\u7A0B\u672C\u8EAB\u662F\u5B89\u5168\u7684\uFF0C\u4F46\u662F\u5B9E\u65BD\u7684\u65F6\u5019\u5B58\u5728\u4E00\u4E2A\u98CE\u9669\uFF1A\u5982\u679C\u6709\u4EBA\u622A\u83B7\u4E86\u767B\u5F55\u8BF7\u6C42\uFF0C\u7136\u540E\u5192\u5145\u8FDC\u7A0B\u4E3B\u673A\uFF0C\u5C06\u4F2A\u9020\u7684\u516C\u94A5\u53D1\u7ED9\u7528\u6237\uFF0C\u90A3\u4E48\u7528\u6237\u5F88\u96BE\u8FA8\u522B\u771F\u4F2A\u3002\u56E0\u4E3A\u4E0D\u50CFhttps\u534F\u8BAE\uFF0CSSH\u534F\u8BAE\u7684\u516C\u94A5\u662F\u6CA1\u6709\u8BC1\u4E66\u4E2D\u5FC31\uFF08CA\uFF09\u516C\u8BC1\u7684\uFF0C\u4E5F\u5C31\u662F\u8BF4\uFF0C\u90FD\u662F\u81EA\u5DF1\u7B7E\u53D1\u7684\u3002\n\n- ssh \u9ED8\u8BA4\u7AEF\u53E3\u662F 22\n\n# \u5BA2\u6237\u7AEF\n\n## \u5B89\u88C5\n\n\u0060\u0060\u0060sh\napt install openssh-client\n\u0060\u0060\u0060\n\n## \u767B\u5F55\n\n\u4EE5\u7528\u6237\u540D user \uFF0C\u767B\u5F55\u8FDC\u7A0B\u4E3B\u673A host\n\u0060\u0060\u0060sh\nssh user@host\n\u0060\u0060\u0060\n\u4F7F\u7528 \u0060p\u0060 \u53C2\u6570\u6307\u5B9A\u7AEF\u53E3\n\u0060\u0060\u0060sh\nssh -p 2222 user@host\n\u0060\u0060\u0060\n\n\u7B2C\u4E00\u6B21\u767B\u9646 ssh \u4F1A\u6307\u51FAhost\u4E3B\u673A\u7684\u516C\u94A5\u6307\u7EB9\uFF0C\u53EF\u7531\u6B64\u5224\u65AD\u6B64\u4E3B\u673A\u662F\u5426\u662F\u771F\u5B9E\u76EE\u6807\uFF08\u9632\u6B62\u4E2D\u95F4\u4EBA\u653B\u51FB\uFF09\u3002\u786E\u8BA4\u540E\u4F1A\u8981\u6C42\u8F93\u5165\u5BC6\u7801\u3002\u5F53\u8FDC\u7A0B\u4E3B\u673A\u7684\u516C\u94A5\u88AB\u63A5\u53D7\u4EE5\u540E\uFF0C\u5B83\u5C31\u4F1A\u88AB\u4FDD\u5B58\u5728\u6587\u4EF6 \u0060$HOME/.ssh/known_hosts\u0060\u4E4B\u4E2D\u3002\u4E0B\u6B21\u518D\u8FDE\u63A5\u8FD9\u53F0\u4E3B\u673A\uFF0C\u7CFB\u7EDF\u5C31\u4F1A\u8BA4\u51FA\u5B83\u7684\u516C\u94A5\u5DF2\u7ECF\u4FDD\u5B58\u5728\u672C\u5730\u4E86\uFF0C\u4ECE\u800C\u8DF3\u8FC7\u8B66\u544A\u90E8\u5206\uFF0C\u76F4\u63A5\u63D0\u793A\u8F93\u5165\u5BC6\u7801\u3002\n\n### \u516C\u94A5\u767B\u5F55\n\n\u6240\u8C13\u0022\u516C\u94A5\u767B\u5F55\u0022\uFF0C\u539F\u7406\u5F88\u7B80\u5355\uFF0C\u5C31\u662F\u7528\u6237\u5C06\u81EA\u5DF1\u7684\u516C\u94A5\u50A8\u5B58\u5728\u8FDC\u7A0B\u4E3B\u673A\u4E0A\u3002\u767B\u5F55\u7684\u65F6\u5019\uFF0C\u8FDC\u7A0B\u4E3B\u673A\u4F1A\u5411\u7528\u6237\u53D1\u9001\u4E00\u6BB5\u968F\u673A\u5B57\u7B26\u4E32\uFF0C\u7528\u6237\u7528\u81EA\u5DF1\u7684\u79C1\u94A5\u52A0\u5BC6\u540E\uFF0C\u518D\u53D1\u56DE\u6765\u3002\u8FDC\u7A0B\u4E3B\u673A\u7528\u4E8B\u5148\u50A8\u5B58\u7684\u516C\u94A5\u8FDB\u884C\u89E3\u5BC6\uFF0C\u5982\u679C\u6210\u529F\uFF0C\u5C31\u8BC1\u660E\u7528\u6237\u662F\u53EF\u4FE1\u7684\uFF0C\u76F4\u63A5\u5141\u8BB8\u767B\u5F55shell\uFF0C\u4E0D\u518D\u8981\u6C42\u5BC6\u7801\u3002\u8FD9\u79CD\u65B9\u6CD5\u8981\u6C42\u7528\u6237\u5FC5\u987B\u63D0\u4F9B\u81EA\u5DF1\u7684\u516C\u94A5\u3002\u5982\u679C\u6CA1\u6709\u73B0\u6210\u7684\uFF0C\u53EF\u4EE5\u76F4\u63A5\u7528 \u0060ssh-keygen\u0060 \u751F\u6210\u4E00\u4E2A\u3002\n\u7136\u540E\u4F7F\u7528 \u0060ssh-copy-id user@host\u0060 \u547D\u4EE4\uFF0C\u5C06\u516C\u94A5\u4F20\u9001\u5230\u8FDC\u7A0B\u4E3B\u673Ahost\u4E0A\uFF08\u4E5F\u53EF\u76F4\u63A5\u4FEE\u6539\u8FDC\u7A0B\u4E3B\u673A\u516C\u94A5\u5B58\u50A8\u6587\u4EF6\uFF09\u3002\n\u8FDC\u7A0B\u4E3B\u673A\u5C06\u7528\u6237\u7684\u516C\u94A5\uFF0C\u4FDD\u5B58\u5728\u767B\u5F55\u540E\u7684\u7528\u6237\u4E3B\u76EE\u5F55\u7684 \u0060$HOME/.ssh/authorized_keys\u0060 \u6587\u4EF6\u4E2D\u3002\u516C\u94A5\u5C31\u662F\u4E00\u6BB5\u5B57\u7B26\u4E32\uFF0C\u53EA\u8981\u628A\u5B83\u8FFD\u52A0\u5728 \u0060authorized_keys\u0060 \u6587\u4EF6\u7684\u672B\u5C3E\u5C31\u884C\u4E86\u3002\n\u5982\u679C\u8FDC\u7A0B\u4E3B\u673A\u7981\u7528\u4E86\u516C\u94A5\u767B\u5F55\uFF0C\u4FEE\u6539\u8FDC\u7A0B\u4E3B\u673A\u4E0A\u7684 \u0060/etc/ssh/sshd_config\u0060 \u540E\u91CD\u542F\u670D\u52A1\uFF1A\n\u0060\u0060\u0060\nRSAAuthentication yes\nPubkeyAuthentication yes\nAuthorizedKeysFile .ssh/authorized_keys\n\u0060\u0060\u0060\n\n## \u5355\u53E5\u6267\u884C\n\n\u0060\u0060\u0060sh\nssh user@host \u0027mkdir -p .ssh \u0026\u0026 cat \u003E\u003E .ssh/authorized_keys\u0027 \u003C ~/.ssh/id_rsa.pub\n\u0060\u0060\u0060\n\u5355\u5F15\u53F7\u4E2D\u95F4\u7684\u90E8\u5206\uFF0C\u8868\u793A\u5728\u8FDC\u7A0B\u4E3B\u673A\u4E0A\u6267\u884C\u7684\u64CD\u4F5C\uFF1B\u540E\u9762\u7684\u8F93\u5165\u91CD\u5B9A\u5411\uFF0C\u8868\u793A\u6570\u636E\u901A\u8FC7SSH\u4F20\u5411\u8FDC\u7A0B\u4E3B\u673A\u3002\n\u8FD9\u5C31\u662F\u8BF4\uFF0CSSH\u53EF\u4EE5\u5728\u7528\u6237\u548C\u8FDC\u7A0B\u4E3B\u673A\u4E4B\u95F4\uFF0C\u5EFA\u7ACB\u547D\u4EE4\u548C\u6570\u636E\u7684\u4F20\u8F93\u901A\u9053\u3002\n\n# \u5BC6\u94A5\u751F\u6210\n\n\u4F7F\u7528 \u0060ssh-keygen\u0060 \u751F\u6210\u5BC6\u94A5\u5BF9\u3002\u53EF\u4EE5\u6307\u5B9A\u4E00\u6BB5\u4FE1\u606F\uFF0C\u5BC6\u94A5\u5BF9\u5B58\u50A8\u4F4D\u7F6E\uFF0C\u5BF9\u79C1\u94A5\u8BBE\u7F6E\u53E3\u4EE4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5728 \u0060$HOME/.ssh/\u0060 \u76EE\u5F55\u4E0B\uFF0C\u4F1A\u65B0\u751F\u6210\u4E24\u4E2A\u6587\u4EF6\uFF1A\u0060id_rsa.pub\u0060 \u548C \u0060id_rsa\u0060\u3002\u524D\u8005\u662F\u4F60\u7684\u516C\u94A5\uFF0C\u540E\u8005\u662F\u4F60\u7684\u79C1\u94A5\u3002\n\n# \u8FDC\u7A0B\u590D\u5236\n\nscp \u662Fsecure copy\u7684\u7B80\u5199\uFF0C\u7528\u4E8E\u5728Linux\u4E0B\u8FDB\u884C\u8FDC\u7A0B\u62F7\u8D1D\u6587\u4EF6\u7684\u547D\u4EE4\u3002\u5176\u4F7F\u7528\u548C cp \u547D\u4EE4\u7C7B\u4F3C\uFF0C\u53EA\u662F\u8868\u8FBE\u8FDC\u7A0B\u4E3B\u673A\u4E0A\u7684\u4F4D\u7F6E\u65F6\u9700\u5305\u542B\u8FDC\u7A0B\u4E3B\u673A\u4FE1\u606F\u3002\n\n- \u672C\u5730\u590D\u5236\u8FDC\u7A0B\u6587\u4EF6\uFF1A\uFF08\u628A\u8FDC\u7A0B\u7684\u6587\u4EF6\u590D\u5236\u5230\u672C\u5730\uFF09\n\u0060\u0060\u0060sh\nscp root@www.test.com:/val/test/test.tar.gz /val/test/test.tar.gz\n\u0060\u0060\u0060\n- \u8FDC\u7A0B\u590D\u5236\u672C\u5730\u6587\u4EF6\uFF1A\uFF08\u628A\u672C\u5730\u7684\u6587\u4EF6\u590D\u5236\u5230\u8FDC\u7A0B\u4E3B\u673A\u4E0A\uFF09\n\u0060\u0060\u0060sh\nscp /val/test.tar.gz root@www.test.com:/val/test.tar.gz\n\u0060\u0060\u0060\n\n## scp \u547D\u4EE4\u53C2\u6570\n\n- \u0060-1\u0060 \u5F3A\u5236scp\u547D\u4EE4\u4F7F\u7528\u534F\u8BAEssh1\n- \u0060-2\u0060 \u5F3A\u5236scp\u547D\u4EE4\u4F7F\u7528\u534F\u8BAEssh2\n- \u0060-4\u0060 \u5F3A\u5236scp\u547D\u4EE4\u53EA\u4F7F\u7528IPv4\u5BFB\u5740\n- \u0060-6\u0060 \u5F3A\u5236scp\u547D\u4EE4\u53EA\u4F7F\u7528IPv6\u5BFB\u5740\n- \u0060-B\u0060 \u4F7F\u7528\u6279\u5904\u7406\u6A21\u5F0F\uFF08\u4F20\u8F93\u8FC7\u7A0B\u4E2D\u4E0D\u8BE2\u95EE\u4F20\u8F93\u53E3\u4EE4\u6216\u77ED\u8BED\uFF09\n- \u0060-C\u0060 \u5141\u8BB8\u538B\u7F29\u3002\uFF08\u5C06-C\u6807\u5FD7\u4F20\u9012\u7ED9ssh\uFF0C\u4ECE\u800C\u6253\u5F00\u538B\u7F29\u529F\u80FD\uFF09\n- \u0060-p\u0060 \u7559\u539F\u6587\u4EF6\u7684\u4FEE\u6539\u65F6\u95F4\uFF0C\u8BBF\u95EE\u65F6\u95F4\u548C\u8BBF\u95EE\u6743\u9650\u3002\n- \u0060-q\u0060 \u4E0D\u663E\u793A\u4F20\u8F93\u8FDB\u5EA6\u6761\u3002\n- \u0060-r\u0060 \u9012\u5F52\u590D\u5236\u6574\u4E2A\u76EE\u5F55\u3002\n- \u0060-v\u0060 \u8BE6\u7EC6\u65B9\u5F0F\u663E\u793A\u8F93\u51FA\u3002scp\u548Cssh(1)\u4F1A\u663E\u793A\u51FA\u6574\u4E2A\u8FC7\u7A0B\u7684\u8C03\u8BD5\u4FE1\u606F\u3002\u8FD9\u4E9B\u4FE1\u606F\u7528\u4E8E\u8C03\u8BD5\u8FDE\u63A5\uFF0C\u9A8C\u8BC1\u548C\u914D\u7F6E\u95EE\u9898\u3002\n- \u0060-c\u0060 cipher \u4EE5cipher\u5C06\u6570\u636E\u4F20\u8F93\u8FDB\u884C\u52A0\u5BC6\uFF0C\u8FD9\u4E2A\u9009\u9879\u5C06\u76F4\u63A5\u4F20\u9012\u7ED9ssh\u3002\n- \u0060-F\u0060 ssh_config \u6307\u5B9A\u4E00\u4E2A\u66FF\u4EE3\u7684ssh\u914D\u7F6E\u6587\u4EF6\uFF0C\u6B64\u53C2\u6570\u76F4\u63A5\u4F20\u9012\u7ED9ssh\u3002\n- \u0060-i\u0060 identity_file \u4ECE\u6307\u5B9A\u6587\u4EF6\u4E2D\u8BFB\u53D6\u4F20\u8F93\u65F6\u4F7F\u7528\u7684\u5BC6\u94A5\u6587\u4EF6\uFF0C\u6B64\u53C2\u6570\u76F4\u63A5\u4F20\u9012\u7ED9ssh\u3002\n- \u0060-l\u0060 limit \u9650\u5B9A\u7528\u6237\u6240\u80FD\u4F7F\u7528\u7684\u5E26\u5BBD\uFF0C\u4EE5Kbit/s\u4E3A\u5355\u4F4D\u3002\n- \u0060-o\u0060 ssh_option \u5982\u679C\u4E60\u60EF\u4E8E\u4F7F\u7528ssh_config(5)\u4E2D\u7684\u53C2\u6570\u4F20\u9012\u65B9\u5F0F\uFF0C\n- \u0060-P\u0060 port \u6CE8\u610F\u662F\u5927\u5199\u7684P, port\u662F\u6307\u5B9A\u6570\u636E\u4F20\u8F93\u7528\u5230\u7684\u7AEF\u53E3\u53F7\n- \u0060-S\u0060 program \u6307\u5B9A\u52A0\u5BC6\u4F20\u8F93\u65F6\u6240\u4F7F\u7528\u7684\u7A0B\u5E8F\u3002\u6B64\u7A0B\u5E8F\u5FC5\u987B\u80FD\u591F\u7406\u89E3ssh(1)\u7684\u9009\u9879\u3002\n\n# \u53C2\u8003\u8D44\u6599\n\n- Linux \u6587\u6863\n- [\u4EC0\u4E48\u662FSSH \u4EE5\u53CA\u5E38\u89C1\u7684ssh \u529F\u80FD](https://blog.csdn.net/u013452337/article/details/80847113)\n"},"Title":"SSH - Secure Shell","Category":{"Items":["Tools"]},"Keywords":{"Items":[]},"CreationTime":"2018-09-17T18:40:02+08:00","ModificationTime":"2018-09-17T18:40:02+08:00"}